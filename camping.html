<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Campings</title>
<style>
body { font-family: Arial; text-align:center; margin-top:50px; }
#total_personnel { font-size:30px; margin:10px; color:blue; }
#last { font-size:20px; color:green; }
</style>
</head>
<body>

<h1 id="titre"></h1>

<input type="number" id="montant" placeholder="Ajouter un montant">
<button onclick="ajouter()">Ajouter</button>

<div id="last">Dernière valeur ajoutée : 0</div>
<div id="total_personnel">Total de ce camping : 0</div>

<script>
// Récupérer l'ID camping depuis l'URL
const params = new URLSearchParams(window.location.search);
const campingId = params.get('id');
document.getElementById('titre').innerText = "Cagnotte - " + campingId;

// Variables locales
let total_camping = 0;
let total_global = 0;

// Ajouter une valeur
function ajouter() {
  const valeur = parseInt(document.getElementById('montant').value);
  if (!isNaN(valeur)) {
    total_camping += valeur;
    total_global += valeur;

    document.getElementById('total_personnel').innerText = "Total de ce camping : " + total_camping;
    document.getElementById('last').innerText = "Dernière valeur ajoutée : " + valeur;

    // Actualiser le compteur total LED si ouvert dans un autre onglet
    localStorage.setItem('total_global', total_global);
  }
}

// Mettre à jour le total global depuis localStorage si on ouvre plusieurs onglets
window.addEventListener('storage', function(e) {
  if (e.key === 'total_global') {
    total_global = parseInt(e.newValue);
  }
});
</script>

</body>
</html>
